    @if(isMobile){
      <app-suppliers-mobile
        [suppliers]="suppliers"
        (create)="showCreateModal()"
        (edit)="editSupplier($event)"
        (delete)="deleteSupplier($event)"
        (filterActiveChange)="filterActive = $event; loadSuppliers()"
        [filterActive]="filterActive"
      />
    } @else {
    <div class="page-container" (click)="closeActionMenu()">
      <div class="page-header">
        <h1>Anbieter</h1>
        <button class="btn-primary" (click)="showCreateModal()">+ Neuer Anbieter</button>
      </div>

      <div class="filters">
        <select [(ngModel)]="filterActive" (ngModelChange)="loadSuppliers()" class="filter-select">
          <option [ngValue]="undefined">Alle</option>
          <option [ngValue]="true">Aktiv</option>
          <option [ngValue]="false">Inaktiv</option>
        </select>
      </div>

      <app-table-container>
        <table class="data-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Kurzbezeichnung</th>
              <th>Adresse</th>
              <th>Telefon</th>
              <th>E-Mail</th>
              <th>Status</th>
              <th>Aktionen</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let supplier of suppliers">
              <td>{{ supplier.name }}</td>
              <td>{{ supplier.shortName }}</td>
              <td>
                <span *ngIf="supplier.address?.street || supplier.address?.city">
                  <span *ngIf="supplier.address?.street">{{ supplier.address?.street }}<br></span>
                  <span *ngIf="supplier.address?.zipCode || supplier.address?.city">
                    {{ supplier.address?.zipCode }} {{ supplier.address?.city }}
                  </span>
                </span>
                <span *ngIf="!supplier.address?.street && !supplier.address?.city">-</span>
              </td>
              <td>
                <span *ngIf="supplier.contactPhone" class="phone-container">
                  {{ supplier.contactPhone }}
                  <a [href]="'tel:' + supplier.contactPhone" class="phone-icon" title="Anrufen">ðŸ“ž</a>
                </span>
                <span *ngIf="!supplier.contactPhone">-</span>
              </td>
              <td>{{ supplier.contactEmail || '-' }}</td>
              <td>
                <span class="badge" [class.badge-active]="supplier.isActive">
                  {{ supplier.isActive ? 'Aktiv' : 'Inaktiv' }}
                </span>
              </td>
              <td class="actions-cell">
                <div class="action-menu-container">
                  <button class="action-menu-btn" (click)="toggleActionMenu(supplier._id); $event.stopPropagation()">
                   <i class="fas fa-ellipsis-v"></i>
                  </button>
                    @if(activeMenuId === supplier._id){
                    <div class="action-menu" (click)="$event.stopPropagation()">
                        <button class="menu-item" (click)="showSupplierDetails(supplier); closeActionMenu()">
                        <i class="fas fa-info-circle fa-lg"></i> Details anzeigen
                        </button>
                        <button class="menu-item" (click)="editSupplier(supplier); closeActionMenu()">
                        <i class="fas fa-edit fa-lg"></i> Bearbeiten
                        </button>
                        @if(supplier.isActive){
                            <button class="menu-item menu-item-danger" (click)="deleteSupplier(supplier._id); closeActionMenu()">
                            <i class="fas fa-trash fa-lg"></i> LÃ¶schen
                            </button>
                        }
                    </div>
                    }
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </app-table-container>
    </div>
    }

    <!-- Create/Edit Modal -->
    @if(showModal){
    <app-overlay-modal (close)="closeModal()">
        <h2>{{ editMode ? 'Anbieter bearbeiten' : 'Neuer Anbieter' }}</h2>
        <form (ngSubmit)="saveSupplier()">
          <div class="form-row">
            <div class="form-group">
              <label>Name*</label>
              <input type="text" [(ngModel)]="currentSupplier.name" name="name" required />
            </div>
            <div class="form-group">
              <label>Kurzbezeichnung*</label>
              <input type="text" [(ngModel)]="currentSupplier.shortName" name="shortName" required />
            </div>
          </div>

          <h3 class="section-title">Adresse</h3>
          <div class="form-group">
            <label>StraÃŸe</label>
            <input type="text" [(ngModel)]="currentSupplier.address!.street" name="street" />
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>PLZ</label>
              <input type="text" [(ngModel)]="currentSupplier.address!.zipCode" name="zipCode" />
            </div>
            <div class="form-group">
              <label>Stadt</label>
              <input type="text" [(ngModel)]="currentSupplier.address!.city" name="city" />
            </div>
          </div>
          <div class="form-group">
            <label>Land</label>
            <input type="text" [(ngModel)]="currentSupplier.address!.country" name="country" />
          </div>

          <h3 class="section-title">Kontakt</h3>
          <div class="form-row">
            <div class="form-group">
              <label>Telefon</label>
              <input type="tel" [(ngModel)]="currentSupplier.contactPhone" name="contactPhone" />
            </div>
            <div class="form-group">
              <label>E-Mail</label>
              <input type="email" [(ngModel)]="currentSupplier.contactEmail" name="contactEmail" />
            </div>
          </div>
          <div class="form-group">
            <label>Website</label>
            <input type="url" [(ngModel)]="currentSupplier.website" name="website" placeholder="https://..." />
          </div>

          <div class="form-group">
            <label>Notizen</label>
            <textarea [(ngModel)]="currentSupplier.notes" name="notes" rows="3"></textarea>
          </div>

          <div class="modal-actions">
            <button type="button" class="btn-secondary" (click)="closeModal()">Abbrechen</button>
            <button type="submit" class="btn-primary">Speichern</button>
          </div>
        </form>
    </app-overlay-modal>
  }

  <!-- Details Modal -->
  @if(showDetailsModal){
    <app-overlay-modal (close)="closeDetailsModal()">
      <div class="modal-header">
        <h2>{{ selectedSupplier?.name }}</h2>
        <button class="btn-close" (click)="closeDetailsModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <div class="modal-body">
        <div class="info-row">
          <span class="label">Name</span>
          <span class="value">{{ selectedSupplier?.name }}</span>
        </div>

        <div class="info-row">
          <span class="label">Kurzbezeichnung</span>
          <span class="value">{{ selectedSupplier?.shortName }}</span>
        </div>

        <div class="info-row" *ngIf="selectedSupplier?.website">
          <span class="label">Website</span>
          <span class="value">
            <a [href]="selectedSupplier?.website" target="_blank" rel="noopener noreferrer">
              {{ selectedSupplier?.website }}
            </a>
          </span>
        </div>

        <div class="info-row" *ngIf="selectedSupplier?.contactPhone">
          <span class="label">Telefon</span>
          <span class="value">{{ selectedSupplier?.contactPhone }}</span>
        </div>

        <div class="info-row" *ngIf="selectedSupplier?.contactEmail">
          <span class="label">E-Mail</span>
          <span class="value">
            <a [href]="'mailto:' + selectedSupplier?.contactEmail">
              {{ selectedSupplier?.contactEmail }}
            </a>
          </span>
        </div>

        <div class="info-row address" *ngIf="selectedSupplier?.address?.street || selectedSupplier?.address?.city">
          <span class="label">Adresse</span>
          <span class="value">
            <span *ngIf="selectedSupplier?.address?.street">{{ selectedSupplier?.address?.street }}<br /></span>
            <span *ngIf="selectedSupplier?.address?.zipCode || selectedSupplier?.address?.city">
              {{ selectedSupplier?.address?.zipCode }} {{ selectedSupplier?.address?.city }}
            </span>
            <span *ngIf="selectedSupplier?.address?.country"><br />{{ selectedSupplier?.address?.country }}</span>
          </span>
        </div>

        <div class="info-row" *ngIf="selectedSupplier?.notes">
          <span class="label">Notizen</span>
          <span class="value">{{ selectedSupplier?.notes }}</span>
        </div>

        <div class="info-row">
          <span class="label">Status</span>
          <span class="value">
            <span class="badge" [class.badge-active]="selectedSupplier?.isActive">
              {{ selectedSupplier?.isActive ? 'Aktiv' : 'Inaktiv' }}
            </span>
          </span>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn-secondary" (click)="closeDetailsModal()">SchlieÃŸen</button>
      </div>
    </app-overlay-modal>
  }