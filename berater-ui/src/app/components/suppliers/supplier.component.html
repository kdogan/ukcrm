    @if(isMobile){
      <app-suppliers-mobile
        [suppliers]="suppliers"
        (create)="showCreateModal()"
        (edit)="editSupplier($event)"
        (delete)="deleteSupplier($event)"
        (filterActiveChange)="filterActive = $event; loadSuppliers()"
        [filterActive]="filterActive"
      />
    } @else {
    <div class="page-container" (click)="closeActionMenu()">
      <div class="page-header">
        <h1>{{ 'SUPPLIERS.TITLE' | translate }}</h1>
        <button class="btn-primary" (click)="showCreateModal()">+ {{ 'SUPPLIERS.NEW' | translate }}</button>
      </div>

      <div class="filters">
        <select [(ngModel)]="filterActive" (ngModelChange)="loadSuppliers()" class="filter-select">
          <option [ngValue]="undefined">{{ 'COMMON.ALL' | translate }}</option>
          <option [ngValue]="true">{{ 'DASHBOARD.ACTIVE' | translate }}</option>
          <option [ngValue]="false">{{ 'ADMIN.STATUS.BLOCKED' | translate }}</option>
        </select>
      </div>

      <app-table-container>
        <table class="data-table">
          <thead>
            <tr>
              <th>{{ 'COMMON.NAME' | translate }}</th>
              <th>{{ 'SUPPLIERS.FIELDS.SHORT_NAME' | translate }}</th>
              <th>{{ 'CUSTOMERS.FIELDS.ADDRESS' | translate }}</th>
              <th>{{ 'COMMON.PHONE' | translate }}</th>
              <th>{{ 'COMMON.EMAIL' | translate }}</th>
              <th>{{ 'COMMON.STATUS' | translate }}</th>
              <th>{{ 'COMMON.ACTIONS' | translate }}</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let supplier of suppliers">
              <td>{{ supplier.name }}</td>
              <td>{{ supplier.shortName }}</td>
              <td>
                <span *ngIf="supplier.address?.street || supplier.address?.city">
                  <span *ngIf="supplier.address?.street">{{ supplier.address?.street }}<br></span>
                  <span *ngIf="supplier.address?.zipCode || supplier.address?.city">
                    {{ supplier.address?.zipCode }} {{ supplier.address?.city }}
                  </span>
                </span>
                <span *ngIf="!supplier.address?.street && !supplier.address?.city">-</span>
              </td>
              <td>
                <span *ngIf="supplier.contactPhone" class="phone-container">
                  {{ supplier.contactPhone }}
                  <a [href]="'tel:' + supplier.contactPhone" class="phone-icon" title="Anrufen">ðŸ“ž</a>
                </span>
                <span *ngIf="!supplier.contactPhone">-</span>
              </td>
              <td>{{ supplier.contactEmail || '-' }}</td>
              <td>
                <span class="badge" [class.badge-active]="supplier.isActive">
                  {{ supplier.isActive ? ('DASHBOARD.ACTIVE' | translate) : ('ADMIN.STATUS.BLOCKED' | translate) }}
                </span>
              </td>
              <td class="actions-cell">
                <div class="action-menu-container">
                  <button class="action-menu-btn" (click)="toggleActionMenu(supplier._id); $event.stopPropagation()">
                   <i class="fas fa-ellipsis-v"></i>
                  </button>
                    @if(activeMenuId === supplier._id){
                    <div class="action-menu" (click)="$event.stopPropagation()">
                        <button class="menu-item" (click)="showSupplierDetails(supplier); closeActionMenu()">
                        <i class="fas fa-info-circle fa-lg"></i> {{ 'COMMON.DETAILS' | translate }}
                        </button>
                        <button class="menu-item" (click)="editSupplier(supplier); closeActionMenu()">
                        <i class="fas fa-edit fa-lg"></i> {{ 'COMMON.EDIT' | translate }}
                        </button>
                        @if(supplier.isActive){
                            <button class="menu-item menu-item-danger" (click)="deleteSupplier(supplier._id); closeActionMenu()">
                            <i class="fas fa-trash fa-lg"></i> {{ 'COMMON.DELETE' | translate }}
                            </button>
                        }
                    </div>
                    }
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </app-table-container>
    </div>
    }

    <!-- Create/Edit Modal -->
    @if(showModal){
    <app-overlay-modal (close)="closeModal()">
        <h2>{{ editMode ? ('SUPPLIERS.EDIT' | translate) : ('SUPPLIERS.NEW' | translate) }}</h2>
        <form (ngSubmit)="saveSupplier()">
          <div class="form-row">
            <div class="form-group">
              <label>{{ 'COMMON.NAME' | translate }}*</label>
              <input type="text" [(ngModel)]="currentSupplier.name" name="name" required />
            </div>
            <div class="form-group">
              <label>{{ 'SUPPLIERS.FIELDS.SHORT_NAME' | translate }}*</label>
              <input type="text" [(ngModel)]="currentSupplier.shortName" name="shortName" required />
            </div>
          </div>

          <h3 class="section-title">{{ 'CUSTOMERS.FIELDS.ADDRESS' | translate }}</h3>
          <div class="form-group">
            <label>{{ 'CUSTOMERS.FIELDS.STREET' | translate }}</label>
            <input type="text" [(ngModel)]="currentSupplier.address!.street" name="street" />
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>{{ 'CUSTOMERS.FIELDS.ZIP' | translate }}</label>
              <input type="text" [(ngModel)]="currentSupplier.address!.zipCode" name="zipCode" />
            </div>
            <div class="form-group">
              <label>{{ 'CUSTOMERS.FIELDS.CITY' | translate }}</label>
              <input type="text" [(ngModel)]="currentSupplier.address!.city" name="city" />
            </div>
          </div>
          <div class="form-group">
            <label>{{ 'CUSTOMERS.FIELDS.COUNTRY' | translate }}</label>
            <input type="text" [(ngModel)]="currentSupplier.address!.country" name="country" />
          </div>

          <h3 class="section-title">{{ 'SUPPLIERS.FIELDS.CONTACT' | translate }}</h3>
          <div class="form-row">
            <div class="form-group">
              <label>{{ 'COMMON.PHONE' | translate }}</label>
              <input type="tel" [(ngModel)]="currentSupplier.contactPhone" name="contactPhone" />
            </div>
            <div class="form-group">
              <label>{{ 'COMMON.EMAIL' | translate }}</label>
              <input type="email" [(ngModel)]="currentSupplier.contactEmail" name="contactEmail" />
            </div>
          </div>
          <div class="form-group">
            <label>{{ 'SUPPLIERS.FIELDS.WEBSITE' | translate }}</label>
            <input type="url" [(ngModel)]="currentSupplier.website" name="website" placeholder="https://..." />
          </div>

          <div class="form-group">
            <label>{{ 'COMMON.NOTES' | translate }}</label>
            <textarea [(ngModel)]="currentSupplier.notes" name="notes" rows="3"></textarea>
          </div>

          <div class="modal-actions">
            <button type="button" class="btn-secondary" (click)="closeModal()">{{ 'COMMON.CANCEL' | translate }}</button>
            <button type="submit" class="btn-primary">{{ 'COMMON.SAVE' | translate }}</button>
          </div>
        </form>
    </app-overlay-modal>
  }

  <!-- Details Modal -->
  @if(showDetailsModal){
    <app-overlay-modal (close)="closeDetailsModal()">
      <div class="modal-header">
        <h2>{{ selectedSupplier?.name }}</h2>
        <button class="btn-close" (click)="closeDetailsModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <div class="modal-body">
        <div class="info-row">
          <span class="label">{{ 'COMMON.NAME' | translate }}</span>
          <span class="value">{{ selectedSupplier?.name }}</span>
        </div>

        <div class="info-row">
          <span class="label">{{ 'SUPPLIERS.FIELDS.SHORT_NAME' | translate }}</span>
          <span class="value">{{ selectedSupplier?.shortName }}</span>
        </div>

        <div class="info-row" *ngIf="selectedSupplier?.website">
          <span class="label">{{ 'SUPPLIERS.FIELDS.WEBSITE' | translate }}</span>
          <span class="value">
            <a [href]="selectedSupplier?.website" target="_blank" rel="noopener noreferrer">
              {{ selectedSupplier?.website }}
            </a>
          </span>
        </div>

        <div class="info-row" *ngIf="selectedSupplier?.contactPhone">
          <span class="label">{{ 'COMMON.PHONE' | translate }}</span>
          <span class="value">{{ selectedSupplier?.contactPhone }}</span>
        </div>

        <div class="info-row" *ngIf="selectedSupplier?.contactEmail">
          <span class="label">{{ 'COMMON.EMAIL' | translate }}</span>
          <span class="value">
            <a [href]="'mailto:' + selectedSupplier?.contactEmail">
              {{ selectedSupplier?.contactEmail }}
            </a>
          </span>
        </div>

        <div class="info-row address" *ngIf="selectedSupplier?.address?.street || selectedSupplier?.address?.city">
          <span class="label">{{ 'CUSTOMERS.FIELDS.ADDRESS' | translate }}</span>
          <span class="value">
            <span *ngIf="selectedSupplier?.address?.street">{{ selectedSupplier?.address?.street }}<br /></span>
            <span *ngIf="selectedSupplier?.address?.zipCode || selectedSupplier?.address?.city">
              {{ selectedSupplier?.address?.zipCode }} {{ selectedSupplier?.address?.city }}
            </span>
            <span *ngIf="selectedSupplier?.address?.country"><br />{{ selectedSupplier?.address?.country }}</span>
          </span>
        </div>

        <div class="info-row" *ngIf="selectedSupplier?.notes">
          <span class="label">{{ 'COMMON.NOTES' | translate }}</span>
          <span class="value">{{ selectedSupplier?.notes }}</span>
        </div>

        <div class="info-row">
          <span class="label">{{ 'COMMON.STATUS' | translate }}</span>
          <span class="value">
            <span class="badge" [class.badge-active]="selectedSupplier?.isActive">
              {{ selectedSupplier?.isActive ? ('DASHBOARD.ACTIVE' | translate) : ('ADMIN.STATUS.BLOCKED' | translate) }}
            </span>
          </span>
        </div>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn-secondary" (click)="closeDetailsModal()">{{ 'COMMON.CLOSE' | translate }}</button>
      </div>
    </app-overlay-modal>
  }