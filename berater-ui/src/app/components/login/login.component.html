<div class="login-container">
  <div class="login-card">
    <div class="login-header">
      <h1>Berater-App</h1>
      <p>Energie- und Elektrik-Beratung</p>
    </div>

    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="email">E-Mail</label>
        <input
          type="email"
          id="email"
          formControlName="email"
          class="form-control"
          [class.is-invalid]="f['email'].invalid && f['email'].touched"
          placeholder="berater@example.com"
        />
        <div class="invalid-feedback" *ngIf="f['email'].invalid && f['email'].touched">
          <span *ngIf="f['email'].errors?.['required']">E-Mail ist erforderlich</span>
          <span *ngIf="f['email'].errors?.['email']">Ungültige E-Mail-Adresse</span>
        </div>
      </div>

      <div class="form-group">
        <div class="password-label-row">
          <label for="password">Passwort</label>
          <a routerLink="/forgot-password" class="forgot-password-link">Passwort vergessen?</a>
        </div>
        <input
          type="password"
          id="password"
          formControlName="password"
          class="form-control"
          [class.is-invalid]="f['password'].invalid && f['password'].touched"
          placeholder="********"
        />
        <div class="invalid-feedback" *ngIf="f['password'].invalid && f['password'].touched">
          <span *ngIf="f['password'].errors?.['required']">Passwort ist erforderlich</span>
          <span *ngIf="f['password'].errors?.['minlength']">Mindestens 8 Zeichen</span>
        </div>
      </div>

      <div class="alert alert-danger" *ngIf="error">
        {{ error }}
      </div>

      <button
        type="submit"
        class="btn btn-primary btn-block"
        [disabled]="loading || loginForm.invalid"
      >
        <span *ngIf="loading">Anmelden...</span>
        <span *ngIf="!loading">Anmelden</span>
      </button>

      <div class="register-link">
        <p>Noch kein Konto? <a routerLink="/register">Jetzt registrieren</a></p>
      </div>

      <div class="privacy-link">
        <a routerLink="/privacy">Datenschutzerklärung</a>
      </div>
    </form>

    <div class="test-users-section" *ngIf="isDevelopment && testUsers.length > 0">
      <h3>Test-Benutzer (Development)</h3>
      <p class="test-users-hint">Klicken Sie auf einen Benutzer, um die E-Mail und Passwort automatisch einzutragen.</p>
      <div class="test-users-list">
        <div
          class="test-user-card"
          *ngFor="let user of testUsers"
          (click)="fillTestUser(user)"
        >
          <div class="test-user-info">
            <div class="test-user-row">
              <span class="label">Name:</span>
              <span class="value">{{ user.name }}</span>
            </div>
            <div class="test-user-row">
              <span class="label">Email:</span>
              <span class="value">{{ user.email }}</span>
            </div>
            <div class="test-user-row">
              <span class="label">Password:</span>
              <span class="value">{{ user.password }}</span>
            </div>
            <div class="test-user-row">
              <span class="label">Rolle:</span>
              <span class="value">{{ user.role }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
