<div class="register-container">
  <div class="register-box">
    <div class="logo-section">
      <h1>{{ t['appTitle'] }}</h1>
      <p>{{ t['subtitle'] }}</p>
    </div>

    <div *ngIf="success" class="success-message">
      <div class="success-icon">âœ“</div>
      <p>{{ successMessage }}</p>
      <p class="small">{{ t['successRedirect'] }}</p>
    </div>

    <form *ngIf="!success" [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
      <div class="form-row">
        <div class="form-group">
          <label for="firstName">{{ t['firstName'] }} *</label>
          <input
            type="text"
            id="firstName"
            formControlName="firstName"
            [class.error]="hasFieldError('firstName')"
            [placeholder]="currentLang === 'tr' ? 'Ahmet' : 'Max'"
          />
          <span *ngIf="hasFieldError('firstName')" class="error-message">
            {{ getFieldError('firstName') }}
          </span>
        </div>

        <div class="form-group">
          <label for="lastName">{{ t['lastName'] }} *</label>
          <input
            type="text"
            id="lastName"
            formControlName="lastName"
            [class.error]="hasFieldError('lastName')"
            [placeholder]="currentLang === 'tr' ? 'YÄ±lmaz' : 'Mustermann'"
          />
          <span *ngIf="hasFieldError('lastName')" class="error-message">
            {{ getFieldError('lastName') }}
          </span>
        </div>
      </div>

      <div class="form-group">
        <label for="email">{{ t['email'] }} *</label>
        <input
          type="email"
          id="email"
          formControlName="email"
          [class.error]="hasFieldError('email')"
          [placeholder]="currentLang === 'tr' ? 'ahmet.yilmaz@example.com' : 'max.mustermann@example.com'"
        />
        <span *ngIf="hasFieldError('email')" class="error-message">
          {{ getFieldError('email') }}
        </span>
      </div>

      <div class="form-group">
        <label for="phone">{{ t['phone'] }}</label>
        <input
          type="tel"
          id="phone"
          formControlName="phone"
          placeholder="+49 123 456789"
        />
      </div>

      <div class="form-group">
        <label for="language">{{ t['language'] }} *</label>
        <select
          id="language"
          formControlName="language"
          class="language-select"
        >
          <option value="de">Deutsch</option>
          <option value="tr">TÃ¼rkÃ§e</option>
        </select>
        <small class="form-hint">{{ t['languageHint'] }}</small>
      </div>

      <!-- <div class="form-group">
        <label for="masterBeraterEmail">Master Berater E-Mail (optional)</label>
        <input
          type="email"
          id="masterBeraterEmail"
          formControlName="masterBeraterEmail"
          [class.error]="hasFieldError('masterBeraterEmail')"
          placeholder="master@example.com"
        />
        <small class="form-hint">ðŸ“š Wenn Sie einen Master Berater haben, geben Sie hier seine E-Mail-Adresse ein, um automatisch Zugriff auf seine Bildungsmaterialien zu erhalten.</small>
        <span *ngIf="hasFieldError('masterBeraterEmail')" class="error-message">
          {{ getFieldError('masterBeraterEmail') }}
        </span>
      </div> -->

      <div class="form-group">
        <label for="password">{{ t['password'] }} *</label>
        <input
          type="password"
          id="password"
          formControlName="password"
          [class.error]="hasFieldError('password')"
          [placeholder]="t['passwordPlaceholder']"
        />
        <span *ngIf="hasFieldError('password')" class="error-message">
          {{ getFieldError('password') }}
        </span>
      </div>

      <div class="form-group">
        <label for="confirmPassword">{{ t['confirmPassword'] }} *</label>
        <input
          type="password"
          id="confirmPassword"
          formControlName="confirmPassword"
          [class.error]="hasFieldError('confirmPassword')"
          [placeholder]="t['confirmPassword']"
        />
        <span *ngIf="hasFieldError('confirmPassword')" class="error-message">
          {{ getFieldError('confirmPassword') }}
        </span>
      </div>

      <div class="form-group">
        <div class="checkbox-wrapper">
          <input
            type="checkbox"
            formControlName="acceptPrivacy"
            [class.error]="hasFieldError('acceptPrivacy')"
            class="checkbox-input"
            id="acceptPrivacy"
          />
          <label for="acceptPrivacy" class="checkbox-label">
            <ng-container *ngIf="currentLang === 'de'">
              {{ t['privacyText'] }} <a [routerLink]="['/privacy']" [queryParams]="{lang: currentLang}" target="_blank">{{ t['privacyLink'] }}</a> {{ t['privacyAccept'] }} *
            </ng-container>
            <ng-container *ngIf="currentLang === 'tr'">
              <a [routerLink]="['/privacy']" [queryParams]="{lang: currentLang}" target="_blank">{{ t['privacyLink'] }}</a> {{ t['privacyAccept'] }} *
            </ng-container>
          </label>
        </div>
        <span *ngIf="hasFieldError('acceptPrivacy')" class="error-message">
          {{ getFieldError('acceptPrivacy') }}
        </span>
      </div>

      <div *ngIf="error" class="error-box">
        <p>{{ error }}</p>
      </div>

      <button
        type="submit"
        class="btn-register"
        [disabled]="loading"
      >
        {{ loading ? t['registerLoading'] : t['registerButton'] }}
      </button>

      <div class="login-link">
        <p>{{ t['loginPrompt'] }} <a routerLink="/login">{{ t['loginLink'] }}</a></p>
      </div>

      <div class="privacy-link">
        <a [routerLink]="['/privacy']" [queryParams]="{lang: currentLang}">{{ t['privacyLink'] }}</a>
      </div>
    </form>
  </div>
</div>
