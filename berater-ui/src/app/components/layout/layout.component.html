<div class="app-layout">
    <!-- Navigation -->
    <nav class="sidebar" [style.background]="sidebarColor">
        <div class="logo">
            <span class="logo-icon">ğŸ¢</span>
            <h2 class="logo-text">Berater App</h2>
        </div>

        <ul class="nav-menu">
            <li>
                <a routerLink="/dashboard" routerLinkActive="active">
                    <span class="icon">ğŸ“Š</span>
                    <span class="nav-text">{{ settings.sidebarLabels.dashboard }}</span>
                </a>
            </li>
            @if(currentUser?.role !== 'superadmin'){
            <li>
                <a routerLink="/customers" routerLinkActive="active">
                    <span class="icon">ğŸ‘¥</span>
                    <span class="nav-text">{{ settings.sidebarLabels.customers }}</span>
                </a>
            </li>

            <li>
                <a routerLink="/meters" routerLinkActive="active">
                    <span class="icon">âš¡</span>
                    <span class="nav-text">{{ settings.sidebarLabels.meters }}</span>
                </a>
            </li>

            <li>
                <a routerLink="/contracts" routerLinkActive="active">
                    <span class="icon">ğŸ“‹</span>
                    <span class="nav-text">{{ settings.sidebarLabels.contracts }}</span>
                </a>
            </li>
            }
            <li>
                <a routerLink="/todos" routerLinkActive="active">
                    <span class="icon">âœ“</span>
                    <span class="nav-text">{{ settings.sidebarLabels.todos }}</span>
                </a>
            </li>
            @if(currentUser?.role !== 'superadmin'){
            <li>
                <a routerLink="/suppliers" routerLinkActive="active">
                    <span class="icon">ğŸ­</span>
                    <span class="nav-text">{{ settings.sidebarLabels.suppliers || 'Anbieter' }}</span>
                </a>
            </li>

            <li>
                <a routerLink="/settings" routerLinkActive="active">
                    <span class="icon">âš™ï¸</span>
                    <span class="nav-text">Einstellungen</span>
                </a>
            </li>
            }
            @if(currentUser?.role === 'superadmin'){
            <li>
                <a routerLink="/admin" routerLinkActive="active">
                    <span class="icon">ğŸ‘¥</span>
                    <span class="nav-text">Benutzer</span>
                </a>
            </li>

            <li>
                <a routerLink="/packages" routerLinkActive="active">
                    <span class="icon">ğŸ“¦</span>
                    <span class="nav-text">Pakete</span>
                </a>
            </li>
            }
            <li>
                <a routerLink="/messages" routerLinkActive="active">
                    <span class="icon">ğŸ’¬</span>
                    <span class="nav-text">Messages</span>
                </a>
            </li>
        </ul>

        <div class="user-section">
            <div class="user-info" *ngIf="currentUser">
                <div class="user-avatar">{{ getUserInitials() }}</div>
                <div class="user-details">
                    <div class="user-name">{{ currentUser.firstName }} {{ currentUser.lastName }}</div>
                    <div class="user-role">{{ currentUser.role }}</div>
                </div>
            </div>
            <button class="logout-btn" (click)="logout()">
                <span class="icon">ğŸšª</span>
                <span class="nav-text">Abmelden</span>
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <router-outlet></router-outlet>
    </main>

    <!-- Mobile Bottom Navigation -->
    <nav class="bottom-nav">
        <a routerLink="/dashboard" routerLinkActive="active">
            <span class="icon">ğŸ“Š</span>
            <span class="label">{{ settings.sidebarLabels.dashboard }}</span>
        </a>
        @if(currentUser?.role !== 'superadmin'){
        <a routerLink="/customers" routerLinkActive="active">
            <span class="icon">ğŸ‘¥</span>
            <span class="label">{{ settings.sidebarLabels.customers }}</span>
        </a>
        }
        <a routerLink="/todos" routerLinkActive="active">
            <span class="icon">âœ“</span>
            <span class="label">{{ settings.sidebarLabels.todos }}</span>
        </a>
        @if(currentUser?.role !== 'superadmin'){
        <a routerLink="/contracts" routerLinkActive="active">
            <span class="icon">ğŸ“‹</span>
            <span class="label">{{ settings.sidebarLabels.contracts }}</span>
        </a>
        }
        @if(currentUser?.role === 'superadmin'){
        <a routerLink="/admin" routerLinkActive="active">
            <span class="icon">ğŸ‘‘</span>
            <span class="label">Benutzer</span>
        </a>
         <a routerLink="/packages" routerLinkActive="active">
            <span class="icon">ğŸ“¦</span>
            <span class="label">Pakete</span>
        </a>
        }

        <!-- MEHR -->
        <button class="more-btn" (click)="toggleMoreMenu()">
            <span class="icon">â‹¯</span>
            <span class="label">Mehr</span>
        </button>
    </nav>

    <!-- Bottom Sheet -->
     @if(showMoreMenu){
        <div class="bottom-sheet-backdrop" (click)="toggleMoreMenu()"></div>
     }
    <div class="bottom-sheet" [class.open]="showMoreMenu">
        @if(currentUser?.role !== 'superadmin'){
        <ul class="nav-menu">
            <li>
                <a routerLink="/meters" routerLinkActive="active">
                    <span class="icon">âš¡</span>
                    <span class="sheet-text">{{ settings.sidebarLabels.meters }}</span>
                </a>
            </li>
            <li>
                <a routerLink="/suppliers" routerLinkActive="active">
                    <span class="icon">ğŸ­</span>
                    <span class="sheet-text">{{ settings.sidebarLabels.suppliers || 'Anbieter' }}</span>
                </a>
            </li>

            <li>
                <a routerLink="/settings" routerLinkActive="active">
                    <span class="icon">âš™ï¸</span>
                    <span class="sheet-text">Einstellungen</span>
                </a>
            </li>
        </ul>
        }
       
        <div class="user-section">
            <div class="user-info" *ngIf="currentUser">
                <div class="user-avatar">{{ getUserInitials() }}</div>
                <div class="user-details">
                    <div class="sheet-text">{{ currentUser.firstName }} {{ currentUser.lastName }}</div>
                    <div class="sheet-text">{{ currentUser.role }}</div>
                </div>
            </div>
            <button class="logout-btn" (click)="logout()">
                <span class="icon">ğŸšª</span>
                <span class="sheet-text">Abmelden</span>
            </button>
        </div>
    </div>
</div>