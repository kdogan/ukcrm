<div class="app-layout">
    <!-- Mobile Header with Burger Menu -->
    <header class="mobile-header">
        <button class="burger-menu" (click)="toggleSidebar()">
            <i class="fas fa-bars fa-2x"></i>
        </button>
        <span class="mobile-logo">Berater App</span>
    </header>

    <!-- Sidebar Overlay for Mobile -->
    @if(sidebarOpen){
        <div class="sidebar-overlay" (click)="toggleSidebar()"></div>
    }

    <!-- Navigation -->
    <nav class="sidebar" [class.open]="sidebarOpen" [style.background]="sidebarColor">
        <div class="logo">
            <span class="logo-icon">üè¢</span>
            <h2 class="logo-text">Berater App</h2>
        </div>

        <ul class="nav-menu">
            <li>
                <a routerLink="/dashboard" routerLinkActive="active" (click)="closeSidebarOnMobile()">
                    <i class="fas fa-dashboard fa-lg"></i>
                    <span class="nav-text">{{ settings.sidebarLabels.dashboard }}</span>
                </a>
            </li>
            @if(currentUser?.role !== 'superadmin'){
            <li>
                <a routerLink="/contracts" routerLinkActive="active" (click)="closeSidebarOnMobile()">
                    <i class="fas fa-file-contract fa-lg"></i>
                    <span class="nav-text">{{ settings.sidebarLabels.contracts }}</span>
                </a>
            </li>
            <li>
                <a routerLink="/customers" routerLinkActive="active" (click)="closeSidebarOnMobile()">
                    <i class="fas fa-users fa-lg"></i>
                    <span class="nav-text">{{ settings.sidebarLabels.customers }}</span>
                </a>
            </li>

            <li>
                <a routerLink="/meters" routerLinkActive="active" (click)="closeSidebarOnMobile()">
                    <i class="fas fa-bolt fa-lg"></i>
                    <span class="nav-text">{{ settings.sidebarLabels.meters }}</span>
                </a>
            </li>
            }
            <li>
                <a routerLink="/todos" routerLinkActive="active" (click)="closeSidebarOnMobile()">
                    <i class="fas fa-check fa-lg"></i>
                    <span class="nav-text">{{ settings.sidebarLabels.todos }}</span>
                </a>
            </li>
            @if(currentUser?.role !== 'superadmin'){
            <li>
                <a routerLink="/suppliers" routerLinkActive="active" (click)="closeSidebarOnMobile()">
                    <i class="fas fa-truck fa-lg"></i>
                    <span class="nav-text">{{ settings.sidebarLabels.suppliers || 'Anbieter' }}</span>
                </a>
            </li>

            <li>
                <a routerLink="/settings" routerLinkActive="active" (click)="closeSidebarOnMobile()">
                    <i class="fas fa-cog fa-lg"></i>
                    <span class="nav-text">Einstellungen</span>
                </a>
            </li>
            }
            @if(currentUser?.role === 'superadmin'){
            <li>
                <a routerLink="/admin" routerLinkActive="active" (click)="closeSidebarOnMobile()">
                    <i class="fas fa-users fa-lg"></i>
                    <span class="nav-text">Benutzer</span>
                </a>
            </li>

            <li>
                <a routerLink="/packages" routerLinkActive="active" (click)="closeSidebarOnMobile()">
                    <i class="fas fa-box fa-lg"></i>
                    <span class="nav-text">Pakete</span>
                </a>
            </li>
            }

        </ul>

        <div class="user-section">
            <div class="user-info" *ngIf="currentUser">
                <div class="user-avatar">{{ getUserInitials() }}</div>
                <div class="user-details">
                    <div class="user-name">{{ currentUser.firstName }} {{ currentUser.lastName }}</div>
                    <div class="user-role">{{ currentUser.role }}</div>
                </div>
            </div>
            <button class="logout-btn" (click)="logout()">
                <i class="fas fa-sign-out-alt"></i>
                <span class="nav-text">Abmelden</span>
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <router-outlet></router-outlet>
    </main>
</div>